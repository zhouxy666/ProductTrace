
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>生产溯源监管端</title>
	<style type="text/css">
		*{margin:0;padding:0;}
		.mymap{height:474px;border:1px solid #ccc;box-shadow:0 0 7px #ccc;}
		.barArea{height:314px;overflow:hidden;border:1px solid red;}
		.barEnt{height:314px;overflow:hidden;border:1px solid red;}
		.btnCity{text-align:center;height:50px;line-height:50px;}
		
		.btnCity ul li{display:inline-block;margin:0 1px;}
		.btnCity ul li a{display: block;padding:0 8px;transform:all 2s ease;}
		.btnCity ul li a:hover{background:#1ab394;color:#fff;}

		#districtPage{height:474px;background-color:#fff;border:1px solid red;}
	</style>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.min862f.css?v=4.1.0" rel="stylesheet">
    <link href="css/plugins/bootstrap-table/bootstrap-table.min.css" rel="stylesheet">
</head>

<body class="gray-bg top-navigation">
    <div id="wrapper">
        <div id="page-wrapper" class="gray-bg">
            <div class="row border-bottom white-bg">
                <nav class="navbar navbar-static-top" role="navigation">
                    <div class="btnCity">
						<ul>
							<li>
								<a href="javascript:void(0)">运城市</a>
							</li>
							<li>
								<a href="javascript:void(0)">盐湖区</a>
							</li>
							<li>
								<a href="javascript:void(0)">河津市</a>
							</li>
							<li>
								<a href="javascript:void(0)">闻喜县</a>
							</li>
							<li>
								<a href="javascript:void(0)">稷山县</a>
							</li>
							<li>
								<a href="javascript:void(0)">万荣县</a>
							</li>
							<li>
								<a href="javascript:void(0)">临猗县</a>
							</li>
							<li>
								<a href="javascript:void(0)">新绛县</a>
							</li>
							<li>
								<a href="javascript:void(0)">平陆县</a>
							</li>
							<li>
								<a href="javascript:void(0)">芮城县</a>
							</li>
							<li>
								<a href="javascript:void(0)">垣曲县</a>
							</li>
							<li>
								<a href="javascript:void(0)">夏县</a>
							</li>
							<li>
								<a href="javascript:void(0)">绛县</a>
							</li>
							<li>
								<a href="javascript:void(0)" id="developCounty">空港开发区</a>
							</li>
							<li>
								<a href="javascript:void(0)" id="developCounty">运城开发区</a>
							</li>
							<li>
								<a href="javascript:void(0)" id="developCounty">绛县开发区</a>
							</li>
							<li>
								<a href="javascript:void(0)" id="developCounty">风陵渡开发区</a>
							</li>
						</ul>
					</div>
                </nav>
            </div>
            <div class="wrapper wrapper-content">
                <div class="container">
                    <div class="row">
                        <div class="col-md-5">
                            <div class="mymap" id="mapContainer"></div>
                        </div>
                        <div class="col-md-7" id="mainPage">
                        	<div class="row">
								<div class="col-md-6">
									<div class="ibox float-e-margins">
		                                <div class="ibox-title">
		                                    <h5>政府放心企业</h5>
		                                    <div class="ibox-tools">
		                                        <span class="label label-primary">2016.10 更新</span>
		                                    </div>
		                                </div>
		                                <div class="ibox-content no-padding">
		                                    <div class="flot-chart m-t-lg" style="height: 55px;">
		                                        <div class="flot-chart-content" id="flot-chart1"></div>
		                                    </div>
		                                </div>
		                            </div>
								</div>
                        		<div class="col-md-6">
									<div class="ibox float-e-margins">
		                                <div class="ibox-title">
		                                    <h5>企业接入情况</h5>
		                                </div>
		                                <div class="ibox-content">
		                                    <div class="row">
		                                        <div class="col-md-6">
		                                            <h1 class="no-margins">100家</h1>
		                                            <div class="font-bold text-navy">23% <i class="fa fa-level-up"></i> <small>企业总数</small>
		                                            </div>
		                                        </div>
		                                        <div class="col-md-6">
		                                            <h1 class="no-margins">77家</h1>
		                                            <div class="font-bold text-navy">77% <i class="fa fa-level-up"></i> <small>接入企业数量</small>
		                                            </div>
		                                        </div>
		                                    </div>
		                                </div>
		                            </div>
                        		</div>
                        	</div>
                        	<div class="row">
								<div class="col-md-6">
									<div class="ibox float-e-margins">
					                    <div class="ibox-title">
					                        <h5>散点图</h5>
					                        <div class="ibox-tools">
					                            <a class="collapse-link">
					                                <i class="fa fa-chevron-up"></i>
					                            </a>
					                            <a class="dropdown-toggle" data-toggle="dropdown" href="graph_flot.html#">
					                                <i class="fa fa-wrench"></i>
					                            </a>
					                            <ul class="dropdown-menu dropdown-user">
					                                <li><a href="graph_flot.html#">选项1</a>
					                                </li>
					                                <li><a href="graph_flot.html#">选项2</a>
					                                </li>
					                            </ul>
					                            <a class="close-link">
					                                <i class="fa fa-times"></i>
					                            </a>
					                        </div>
					                    </div>
					                    <div class="ibox-content">
					                        <div class="echarts" id="echarts-scatter-chart"></div>
					                    </div>
					                </div>
								</div>
                        		<div class="col-md-6">
									<div class="barEnt" id="barEnt"></div>
                        		</div>
                        	</div>

                            <!-- <div class="ibox float-e-margins">
                                <div class="ibox-title">
                                    <span class="label label-info pull-right">年</span>
                                    <h5>订单</h5>
                                </div>
                                <div class="ibox-content">
                                    <h1 class="no-margins">80,800</h1>
                                    <div class="stat-percent font-bold text-info">20% <i class="fa fa-level-up"></i>
                                    </div>
                                    <small>新订单</small>
                                </div>
                            </div> -->
                        </div>
                        <div class="col-md-7" id="districtPage" style="display:none">
							<div class="ibox float-e-margins">
					            <div class="ibox-content">
					                <div class="row row-lg">
					                    <div class="col-sm-12">
					                        <div class="example">
					                            <table id="exampleTablePagination" data-toggle="table" data-url="js/demo/bootstrap_table_test.json" data-query-params="queryParams" data-mobile-responsive="true" data-height="400" data-pagination="true" data-icon-size="outline" data-search="true">
				                                    <thead>
				                                        <tr>
				                                            <th data-field="state" data-checkbox="true"></th>
				                                            <th data-field="id">ID</th>
				                                            <th data-field="name">名称</th>
				                                            <th data-field="price">价格</th>
				                                        </tr>
				                                    </thead>
				                                </table>
					                        </div>
					                    </div>
					                </div>
					            </div>
       					 	</div>
                        </div>             
                    </div>
                </div>
            </div>
            <div class="footer">
                <div class="pull-right">
                    By：<a href="http://www.zi-han.net/" target="_blank">zihan's blog</a>
                </div>
                <div>
                    <strong>Copyright</strong> H+ &copy; 2014
                </div>
            </div>
        </div>
    </div>

    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="http://webapi.amap.com/maps?v=1.3&key=8325164e247e15eea68b59e89200988b"></script>
    <script src="js/plugins/bootstrap-table/bootstrap-table.min.js"></script>
    <script src="js/plugins/bootstrap-table/bootstrap-table-mobile.min.js"></script>
    <script src="js/plugins/bootstrap-table/locale/bootstrap-table-zh-CN.min.js"></script>
    <script src="js/demo/bootstrap-table-demo.min.js"></script>
    <script src="js/plugins/echarts/echarts-all.js"></script>
	<script type="text/javascript" src="js/echarts.min.js"></script>
    <script>
        $(document).ready(function(){
        	var $btnCity = $(".btnCity");
        	var	myChart1 = echarts.init(document.getElementById('barArea'));
			var	myChart2 = echarts.init(document.getElementById('barEnt'));
        	var option = {
			    tooltip : {
			        trigger: 'axis',
			        axisPointer : {            // 坐标轴指示器，坐标轴触发有效
			            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
			        }
			    },
			    legend: {
			        data:[]
			    },
			    grid: {
			    	show:true,
			        left: '1%',
			        right: '4%',
			        bottom: '3%',
			        containLabel: true
			    },
			    xAxis : [
			        {
			            type : 'category',
			            data : ['A级别','B级别','C级别','D级别'],
			            nameLocation : 'end',
			            nameGap:15,
			            name:'区域分类'

			        }
			    ],
			    yAxis : [
			        {
			            type : 'value',
			            name : '统计数量'
			        }
			    ],
			    series : [
			        {
			            name:'',
			            type:'bar',
			            data:[320, 332, 301, 334],
			            barWidth :25,
			            barGap:'5%'
			        }
			    ]
			};
        	//绑定点击事件
        	$btnCity.find('li').on({
        		'mouseenter':function(){
        			if(!$(this).children('a').attr('id')){
        				var countyName = $(this).children('a').html();
        				showMap(countyName,false);			
					}else{
						console.log('对经济开发区撒点');
					}
        		},
        		'click':function(){
        			if(!$(this).children('a').attr('id')){
        				var countyName = $(this).children('a').html();
        				if(countyName == '运城市'){
        					$('#districtPage').fadeOut(100);
        					$('#mainPage').fadeIn(100);	
        				}else{
	        				$('#mainPage').fadeOut(100);
	        				$('#districtPage').fadeIn(1000);
        				}
        				showMap(countyName,true);
        			}
        			
        		}
        	});

        	/**
        	 * [showMap description]
        	 * @param  {[type]} eleCity [description]
        	 * @param  {[type]} getFlag [description]
        	 * @return {[type]}         [description]
        	 */
        	function showMap(eleCity,getFlag){
				//创建一个地图
				var map = new AMap.Map('mapContainer', {
			      resizeEnable: true,
			      zoom:8,
			      center: [111.15142822, 35.15809125]
			    });
				//默认显示 运城市 的行政边界
				AMap.service('AMap.DistrictSearch',function(){
					//实例化DistrictSearch,并初始化
					 districtSearch = new AMap.DistrictSearch({
					 	level:'city',
					 	subdistrict:2,
					 	extensions:'all'
					 });
					 //调用districtSearch对象的search调用行政区查询功能
					 districtSearch.search(eleCity,function(status,result){
					 	//显示运城地区所有的下级区县的信息
					 	var bounds = result.districtList[0].boundaries;
				 	    var polygons = [];
			            if (bounds) {
			                for (var i = 0, l = bounds.length; i < l; i++) {
			                    //生成行政区划polygon 
			                    var polygon = new AMap.Polygon({
			                        map: map,
			                        strokeWeight: 1,
			                        path: bounds[0],
			                        fillOpacity: 0.7,
			                        fillColor: '#CCF3FF',
			                        strokeColor: '#CC66CC'
			                    });
			                  polygons.push(polygon);
			                  console.log(result.districtList[0]);
							}
			                getFlag?map.setFitView():function(){return};//地图自适应
			            }
					 })
				});
			}
			//初始化显示地图
			showMap('运城市',false);
			//显示柱状图1
			myChart1.setOption(option);
			//显示柱状图2
			myChart2.setOption(option);
        });
    </script>
</body>
<!-- Mirrored from www.zi-han.net/theme/hplus/index_v5.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 20 Jan 2016 14:18:52 GMT -->
</html>
